## API Report File for "@formidable-webview/webshell"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { ComponentPropsWithoutRef } from 'react';
import type { ComponentType } from 'react';
import type { ElementRef } from 'react';
import type { ForwardRefExoticComponent } from 'react';
import type { Ref } from 'react';
import type { RefAttributes } from 'react';

// @public
export interface AutoheightParams<S extends WebshellProps<MinimalWebViewProps, Feature<any, any>[]>> {
    initialHeight?: number;
    reinitHeightOnViewportWidthChange?: boolean;
    webshellProps: S;
    width?: number;
}

// @public
export interface AutoheightState<S extends WebshellProps<MinimalWebViewProps, [FeatureInstanceOf<typeof HandleHTMLDimensionsFeature>]>> {
    autoheightWebshellProps: Pick<S, 'webshellDebug' | 'onDOMHTMLDimensions' | 'style' | 'scalesPageToFit' | 'showsVerticalScrollIndicator' | 'disableScrollViewPanResponder'> & Partial<S>;
    contentSize: Partial<DOMRectSize>;
    resizeImplementation: HTMLDimensionsImplementation | null;
    syncState: AutoheightSyncState;
}

// @public
export type AutoheightSyncState = 'init' | 'syncing' | 'synced';

// @public (undocumented)
export interface CSSBox {
    // (undocumented)
    height: number;
    // (undocumented)
    width: number;
}

// @public
export interface CSSBoxDimensionsComputedStyle {
    // (undocumented)
    borderBottomWidth: number;
    // (undocumented)
    borderLeftWidth: number;
    // (undocumented)
    borderRightWidth: number;
    // (undocumented)
    borderTopWidth: number;
    // (undocumented)
    marginBottom: number;
    // (undocumented)
    marginLeft: number;
    // (undocumented)
    marginRight: number;
    // (undocumented)
    marginTop: number;
    // (undocumented)
    paddingBottom: number;
    // (undocumented)
    paddingLeft: number;
    // (undocumented)
    paddingRight: number;
    // (undocumented)
    paddingTop: number;
}

// @public
export type DOMCollectionRequest = DOMElementQueryRequest | DOMElementClassNameRequest | DOMElementTagNameRequest | string;

// @public
export type DOMElementClassNameRequest = {
    className: string;
};

// @public
export type DOMElementIdRequest = {
    id: string;
};

// @public
export type DOMElementQueryRequest = {
    query: string;
};

// @public
export type DOMElementRequest = DOMElementQueryRequest | DOMElementClassNameRequest | DOMElementIdRequest | DOMElementTagNameRequest | string;

// @public
export type DOMElementTagNameRequest = {
    tagName: string;
};

// @public
export interface DOMRect extends DOMRectSize {
    // (undocumented)
    bottom: number;
    // (undocumented)
    left: number;
    // (undocumented)
    right: number;
    // (undocumented)
    top: number;
}

// @public (undocumented)
export interface DOMRectSize {
    // (undocumented)
    height: number;
    // (undocumented)
    width: number;
}

// @public
export interface DOMUtils {
    getDOMSelection(selector: DOMElementRequest): HTMLElement | null;
    getDOMSelectionAll(selector: DOMElementQueryRequest | string): any;
    getDOMSelectionAll(selector: DOMElementClassNameRequest | DOMElementTagNameRequest): any;
    // (undocumented)
    numericFromPxString(style: string): number;
}

// @public
export interface ElementCSSBoxDimensions {
    borderBox: CSSBox;
    computedStyle: CSSBoxDimensionsComputedStyle;
    horizontalScrollbarWidth: number;
    scrollBox: CSSBox;
    verticalScrollbarWidth: number;
}

// @public (undocumented)
export type ExtractPropsFromSpecs<S> = S extends PropsSpecs<infer N, any> ? S[N] extends never ? {} : Required<S[N]>['signature'] : never;

// @public (undocumented)
export type ExtractWebHandlerSpecFromDef<S> = S extends WebHandlerDefinition<infer P, infer I> ? {
    [k in I]: WebHandlerDefinition<P, I>;
} : never;

// @public (undocumented)
export type ExtractWebHandlerSpecsFromFeature<F> = F extends Feature<any, any, infer P> ? P : never;

// @public
export type ExtractWebshellFromFeatClass<C extends ComponentType<any>, F extends FeatureConstructor<any, any, any>[]> = WebshellComponent<C, FeatureInstanceOf<F[number]>[]>;

// @public
export abstract class Feature<O extends {}, P extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> implements FeatureDefinition<O> {
    // @internal
    protected constructor(params: FeatureDefinition<O> & {
        propSpecs: P;
        webSpecs: W;
    }, options: O);
    // (undocumented)
    readonly defaultOptions: Required<O>;
    // (undocumented)
    readonly featureIdentifier: string;
    // (undocumented)
    hasWebHandler(handlerId: string): boolean;
    // (undocumented)
    readonly options: O;
    // (undocumented)
    readonly propSpecs: P;
    readonly script: string;
    // (undocumented)
    readonly webSpecs: W;
}

// @public
export class FeatureBuilder<O extends {}, S extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> {
    constructor(config: FeatureBuilderConfig<O, S>);
    build(): FeatureConstructor<O, S, W>;
    withandlerProp<P, H extends string>(propName: H, handlerId?: string): FeatureBuilder<O, S & PropsSpecs<H, (p: P) => void>, W>;
    withWebHandler<P = undefined, I extends string = string>(handlerId: I): FeatureBuilder<O, S, W & { [k in I]: WebHandlerDefinition<P, I>; }>;
}

// @public
export interface FeatureBuilderConfig<O extends {}, S extends PropsSpecs<any, any> = {}> extends FeatureDefinition<O> {
    // @internal (undocumented)
    __propSpecs?: S;
    // @internal (undocumented)
    __webSpecs?: WebHandlersSpecs<any>;
}

// @public
export interface FeatureConstructor<O extends {}, S extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> {
    // (undocumented)
    new (...args: O extends Partial<O> ? [] | [O] : [O]): Feature<O, S, W>;
    // (undocumented)
    identifier: string;
    // (undocumented)
    name: string;
}

// @public
export type FeatureDefinition<O extends {}> = {
    readonly script: string;
    readonly featureIdentifier: string;
    readonly defaultOptions: Required<O>;
};

// @public
export type FeatureInstanceOf<F> = F extends FeatureConstructor<infer O, infer S, infer W> ? Feature<O, S, W> : never;

// @public
export const ForceElementSizeFeature: FeatureConstructor<ForceElementSizeOptions>;

// @public
export interface ForceElementSizeOptions {
    forceHeight?: boolean;
    forceWidth?: boolean;
    heightValue?: number | string;
    shouldThrowWhenNotFound?: boolean;
    target: DOMElementRequest;
    widthValue?: number | string;
}

// @public
export const ForceResponsiveViewportFeature: FeatureConstructor<ForceResponsiveViewportOptions>;

// @public
export interface ForceResponsiveViewportOptions {
    maxScale?: number;
}

// @public
export interface HandleElementCSSBoxDimensionsOptions {
    shouldThrowWhenNotFound?: boolean;
    target: DOMElementRequest;
}

// @public
export const HandleElementCSSBoxFeature: FeatureConstructor<HandleElementCSSBoxDimensionsOptions, {
    onDOMElementCSSBoxDimensions: PropDefinition<'onDOMElementCSSBoxDimensions', (e: ElementCSSBoxDimensions) => void>;
}>;

// @public
export const HandleHashChangeFeature: FeatureConstructor<HandleHashChangeOptions, {
    onDOMHashChange: PropDefinition<'onDOMHashChange', (e: HashChangeEvent) => void>;
}>;

// @public
export interface HandleHashChangeOptions {
    shouldResetHashOnEvent?: boolean;
}

// @public
export const HandleHTMLDimensionsFeature: FeatureConstructor<HandleHTMLDimensionsOptions, {
    onDOMHTMLDimensions: PropDefinition<'onDOMHTMLDimensions', (d: HTMLDimensions) => void>;
}>;

// @public
export interface HandleHTMLDimensionsOptions {
    deltaMin?: number;
    forceImplementation?: HTMLDimensionsImplementation | false;
    pollingInterval?: number;
}

// @public
export const HandleLinkPressFeature: FeatureConstructor<LinkPressOptions, {
    onDOMLinkPress: PropDefinition<'onDOMLinkPress', (t: LinkPressTarget) => void>;
}>;

// @public
export const HandleVisualViewportFeature: FeatureConstructor<{}, {
    onDOMVisualViewport: PropDefinition<'onDOMVisualViewport', (d: VisualViewportDimensions) => void>;
}>;

// @public
export interface HashChangeEvent {
    hash: string;
    targetElementBoundingRect: DOMRect;
}

// @public
export interface HTMLDimensions {
    content: DOMRectSize;
    implementation: HTMLDimensionsImplementation;
    layoutViewport: DOMRectSize;
}

// @public
export type HTMLDimensionsImplementation = 'resize' | 'mutation' | 'polling';

// @public
export interface LinkPressOptions {
    ignoreHashChange?: boolean;
    preventDefault?: boolean;
}

// @public
export interface LinkPressTarget {
    clickedAnchorBoundingRect: DOMRect;
    hrefAttribute: string;
    page: {
        origin: string | null;
        href: string;
    };
    scheme: string;
    uri: string;
}

// @public
function makeWebshell<C extends ComponentType<any>, F extends Feature<any, any, any>[]>(WebView: C, ...features: F): WebshellComponent<C, F>;

export default makeWebshell;

export { makeWebshell }

// @public
export interface MinimalWebViewProps {
    // (undocumented)
    readonly disableScrollViewPanResponder?: unknown;
    // (undocumented)
    readonly injectedJavaScript?: unknown;
    // (undocumented)
    readonly javaScriptEnabled?: unknown;
    // (undocumented)
    readonly onError?: unknown;
    // (undocumented)
    readonly onMessage?: unknown;
    // (undocumented)
    readonly onNavigationStateChange?: unknown;
    // (undocumented)
    readonly scalesPageToFit?: unknown;
    // (undocumented)
    readonly showsVerticalScrollIndicator?: unknown;
    // (undocumented)
    readonly source?: Record<string, any>;
    // (undocumented)
    readonly style?: unknown;
}

// @public
export type PropDefinition<N extends string, P> = {
    handlerId: string;
    type: 'handler' | 'inert';
    featureIdentifier: string;
    name: N;
    signature?: Partial<Record<N, P>>;
};

// @public
export type PropsFromFeature<F> = F extends Feature<any, infer S, any> ? ExtractPropsFromSpecs<S> : {};

// @public (undocumented)
export type PropsSpecs<N extends string, P> = {
    [k in N]: PropDefinition<N, P>;
};

// @beta
export function useAutoheight<S extends WebshellProps<MinimalWebViewProps, [FeatureInstanceOf<typeof HandleHTMLDimensionsFeature>]>>(params: AutoheightParams<S>): AutoheightState<S>;

// @public
export interface VisualViewportDimensions {
    isLegacy: boolean;
    scale: number;
    visualViewport: DOMRectSize;
}

// @public (undocumented)
export interface WebHandle {
    // (undocumented)
    postMessageToWeb<F extends Feature<any, any, any>, H extends keyof ExtractWebHandlerSpecsFromFeature<F>>(feat: F, handlerId: H, payload: Required<ExtractWebHandlerSpecsFromFeature<F>[H]>['payload']): void;
}

// @public
export interface WebHandlerDefinition<P, I extends string> {
    // (undocumented)
    async: false;
    // (undocumented)
    handlerId: I;
    // (undocumented)
    payload?: P;
}

// @public (undocumented)
export type WebHandlersSpecs<P = {}, I extends string = string> = {
    [k in I]: WebHandlerDefinition<P, I>;
};

// @public
export interface WebjsContext<O extends {}> {
    info(message: string): void;
    makeCallbackSafe<T extends Function>(callback: T): T;
    onShellMessage<P>(handlerId: string, handler: (payload: P) => void): void;
    readonly options: O;
    postMessageToShell<P>(payload: P): void;
    postMessageToShell<P>(handlerId: string, payload: P): void;
    utils: DOMUtils;
    warn(message: string): void;
}

// @public
export type WebshellComponent<C extends ComponentType<any>, F extends Feature<any, any, any>[]> = ForwardRefExoticComponent<WebshellProps<ComponentPropsWithoutRef<C>, F> & RefAttributes<ElementRef<C>>>;

// @public
export interface WebshellInvariantProps {
    onWebFeatureError?: (featureIdentifier: string, error: string) => void;
    webHandle?: Ref<WebHandle>;
    webshellDebug?: boolean;
}

// @public
export type WebshellProps<W extends MinimalWebViewProps, F extends Feature<any, any, any>[]> = WebshellInvariantProps & W & (F[number] extends never ? {} : PropsFromFeature<F[number]>);


// (No @packageDocumentation comment for this package)

```
